<div class="space-y-6">
  <!-- Header -->
  <div class="text-center border-b border-gray-200 dark:border-gray-600 pb-4">
    <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-2 flex items-center justify-center">
      <svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
      </svg>
      Price Update
    </h3>
    <p class="text-sm text-gray-600 dark:text-gray-400">Update pricing for <span class="font-semibold text-gray-900 dark:text-gray-100">{{ product.name }}</span></p>
  </div>

  <!-- Current Pricing Display -->
  <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600">
    <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center">
      <svg class="w-4 h-4 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      Current Pricing
    </h4>
    <div class="grid grid-cols-2 gap-4 text-sm">
      <div class="text-center p-3 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600">
        <p class="text-gray-600 dark:text-gray-400 font-medium mb-1">Cost Price</p>
        <p class="text-orange-600 dark:text-orange-400 font-bold text-lg">৳ {{ product.cost_price|floatformat:2|default:"0.00" }}</p>
      </div>
      <div class="text-center p-3 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600">
        <p class="text-gray-600 dark:text-gray-400 font-medium mb-1">Sale Price</p>
        <p class="text-green-600 dark:text-green-400 font-bold text-lg">৳ {{ product.sale_price|floatformat:2 }}</p>
      </div>
    </div>
  </div>

  <!-- Price Update Form -->
  <form method="post" action="{% url 'products:product_price_update' product.pk %}" class="space-y-4">
    {% csrf_token %}
    
    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600">
      <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center">
        <svg class="w-4 h-4 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
        </svg>
        Update Pricing
      </h4>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control w-full">
          <label class="label">
            <span class="label-text font-semibold text-gray-700 dark:text-gray-300 flex items-center">
              <svg class="w-4 h-4 mr-1 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
              </svg>
              Cost Price
            </span>
          </label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 font-semibold">৳</span>
            <input
              type="number"
              step="0.01"
              min="0"
              name="cost_price"
              value="{{ product.cost_price }}"
              placeholder="0.00"
              class="input input-bordered w-full pl-8 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 focus:border-orange-500 dark:focus:border-orange-400"
              required
            />
          </div>
          <div class="label">
            <span class="label-text-alt text-gray-500 dark:text-gray-400">How much you paid for this product</span>
          </div>
        </div>

        <div class="form-control w-full">
          <label class="label">
            <span class="label-text font-semibold text-gray-700 dark:text-gray-300 flex items-center">
              <svg class="w-4 h-4 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
              </svg>
              Sale Price
            </span>
          </label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 font-semibold">৳</span>
            <input
              type="number"
              step="0.01"
              min="0"
              name="sale_price"
              value="{{ product.sale_price }}"
              placeholder="0.00"
              class="input input-bordered w-full pl-8 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 focus:border-green-500 dark:focus:border-green-400"
              required
            />
          </div>
          <div class="label">
            <span class="label-text-alt text-gray-500 dark:text-gray-400">Price customers will pay</span>
          </div>
        </div>
      </div>

      <!-- Profit Margin Calculator (Optional Enhancement) -->
      <div class="mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600">
        <div class="flex items-center justify-between text-sm">
          <span class="text-gray-600 dark:text-gray-400 font-medium flex items-center">
            <svg class="w-4 h-4 mr-1 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
            </svg>
            Profit Margin:
          </span>
          <span id="profit-display" class="font-semibold text-blue-600 dark:text-blue-400">
            ৳ {{ product.sale_price|floatformat:2|add:"-"|add:product.cost_price|default:"0.00"|floatformat:2 }}
          </span>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-control pt-4 border-t border-gray-200 dark:border-gray-600">
      <div class="flex gap-3">
        <button 
          type="button" 
          onclick="productModal.close()" 
          class="btn btn-ghost flex-1 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"
        >
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn btn-primary flex-1 bg-green-600 hover:bg-green-700 border-green-600 hover:border-green-700 text-white"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          Update Prices
        </button>
      </div>
    </div>
  </form>
</div>

<script>
// Optional: Real-time profit calculation
document.addEventListener('DOMContentLoaded', function() {
  const costInput = document.querySelector('input[name="cost_price"]');
  const saleInput = document.querySelector('input[name="sale_price"]');
  const profitDisplay = document.getElementById('profit-display');

  function calculateProfit() {
    const cost = parseFloat(costInput.value) || 0;
    const sale = parseFloat(saleInput.value) || 0;
    const profit = sale - cost;
    const percentage = cost > 0 ? ((profit / cost) * 100).toFixed(1) : 0;
    
    profitDisplay.innerHTML = `৳ ${profit.toFixed(2)} <span class="text-xs">(${percentage}%)</span>`;
    
    // Change color based on profit
    if (profit > 0) {
      profitDisplay.className = 'font-semibold text-green-600 dark:text-green-400';
    } else if (profit < 0) {
      profitDisplay.className = 'font-semibold text-red-600 dark:text-red-400';
    } else {
      profitDisplay.className = 'font-semibold text-gray-600 dark:text-gray-400';
    }
  }

  if (costInput && saleInput && profitDisplay) {
    costInput.addEventListener('input', calculateProfit);
    saleInput.addEventListener('input', calculateProfit);
    calculateProfit(); // Initial calculation
  }
});
</script>